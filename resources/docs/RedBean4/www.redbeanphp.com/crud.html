<!DOCTYPE html>
<html>
	
<!-- Mirrored from www.redbeanphp.com/crud by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 23 Apr 2015 06:56:10 GMT -->
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1"/>
	<title>RedBeanPHP4 :: CRUD</title>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="author" content="Gabor de Mooij" />
	<meta name="google-site-verification" content="CGmZGF9HRybgk4Hz-IfpVoFbZNP8XNb7iJv37VQD9g0" />
	<link rel="alternate" title="rss" type="application/rss+xml" href="https://github.com/gabordemooij.atom" />
	<link rel="icon" type="image/gif" href="favicon.gif"/>
	<link href='http://fonts.googleapis.com/css?family=Fjalla+One%7COpen+Sans' rel='stylesheet' type='text/css' />
	<link rel="stylesheet" type="text/css" media="all" href="neat.css" />
	</head>
	<body>
		<div class="wrapper">
			<div class="top">
				<a style="boder-width:0px;" href="index.html" rel="home"><img  class="logo" src="img/redbeanphp_logo.png" alt="RedBeanPHP logo, a white bean on a red square." title="Easy ORM for PHP" /></a>
				<h1>RedBeanPHP 4<br /><span>The Power ORM</span>
				</h1>
				<ul>
					<li><a title="Contribute to RedBeanPHP or fork the repository on Github." target="_blank" href="http://github.com/gabordemooij/redbean">Github</a></li>
					<li><a title="Read the latest test report on Travis-CI." target="_blank" href="http://travis-ci.org/gabordemooij/redbean">Travis</a></li>
					<li><a title="Discover hidden treasures in RedBeanPHP ORM with the API documentation." target="_blank" href="api/index.html">API</a></li>
					<li><a title="Ask questions or help others at the RedBeanPHP forum." target="_blank" href="http://groups.google.com/forum/?fromgroups#!forum/redbeanorm">Forum</a></li>
					<li><a title="The previous manual site for RedBeanPHP 3." href="manual3_0/index.html">Version 3</a></li>
				</ul>
			</div>
			<div class="manual">
				<div class="index">
					<ul class="topics"><li><b class="cat">Introduction</b><ul><li><a title="Welcome"  href="welcome.html">Welcome</a></li><li><a title="Requirements"  href="requirements.html">Requirements</a></li><li><a title="Download"  href="download.html">Download</a></li><li><a title="Install"  href="install.html">Install</a></li><li><a title="Connection"  href="connection.html">Connection</a></li></ul></li><li><b class="cat">Basics</b><ul><li><span class="current" title="You are on this page" >CRUD</span></li><li><a title="Finding"  href="finding.html">Finding</a></li><li><a title="Querying"  href="querying.html">Querying</a></li><li><a title="Database"  href="database.html">Database</a></li><li><a title="Fluid and Frozen"  href="fluid_and_frozen.html">Fluid and Frozen</a></li><li><a title="Debugging"  href="debugging.html">Debugging</a></li></ul></li><li><b class="cat">Relations</b><ul><li><a title="One-to-many"  href="one_to_many.html">One-to-many</a></li><li><a title="Many-to-one"  href="many_to_one.html">Many-to-one</a></li><li><a title="Aliases"  href="aliases.html">Aliases</a></li><li><a title="Many-to-many"  href="many_to_many.html">Many-to-many</a></li><li><a title="Using SQL Snippets"  href="using_sql_snippets.html">Using SQL Snippets</a></li><li><a title="Counting"  href="counting.html">Counting</a></li><li><a title="Labels, Enums, Tags"  href="labels__enums__tags.html">Labels, Enums, Tags</a></li></ul></li><li><b class="cat">Advanced</b><ul><li><a title="Trees"  href="trees.html">Trees</a></li><li><a title="Link Beans"  href="link_beans.html">Link Beans</a></li><li><a title="Other relations"  href="other_relations.html">Other relations</a></li><li><a title="Models"  href="models.html">Models</a></li><li><a title="Meta data"  href="meta_data.html">Meta data</a></li><li><a title="Duplicate"  href="duplicate.html">Duplicate</a></li><li><a title="Import and Export"  href="import_and_export.html">Import and Export</a></li><li><a title="Non-static"  href="non_static.html">Non-static</a></li><li><a title="UUIDs"  href="uuids.html">UUIDs</a></li><li><a title="Prefixes"  href="prefixes.html">Prefixes</a></li></ul></li><li><b class="cat">Project</b><ul><li><a title="Changelog"  href="changelog.html">Changelog</a></li><li><a title="Beta testing"  href="beta_testing.html">Beta testing</a></li><li><a title="Roadmap"  href="roadmap.html">Roadmap</a></li><li><a title="About"  href="about.html">About</a></li><li><a title="Plugins"  href="plugins.html">Plugins</a></li></ul></li></ul>
				</div>
				<div class="content">
					<div class="inlay"><h1 >CRUD</h1>

<p>
	CRUD stands for <b>C</b>reate, <b>U</b>pdate, <b>R</b>etrieve and <b>D</b>elete.
	CRUD operations are the core of many web applications.
</p>

<h2>Working with beans</h2>
<p>
	RedBeanPHP works with beans. Most interactions with the <b>database</b> are
	accomplished using beans. Beans are used to carry data from and to the database.
	<br /><br >
	Every bean has a <b>type</b> and an <b>ID</b>.
	The type of a bean tells you which <b>table</b> in the database is used to store the bean.
	Every type maps to a corresponding table. The ID of a bean is the <b>primary key</b>
	of the corresponding <b>record</b>.
	<br />
	You can create a new bean by dispensing one.
</p>

<h2 id="dispense">Create</h2>
<p>
	To create a new bean (of type 'book') use:
</p>
<div class="codeblock"><code><span style="color: #000000">
<span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;$book&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">R</span><span style="color: #007700">::</span><span style="color: #0000BB">dispense</span><span style="color: #007700">(&nbsp;</span><span style="color: #DD0000">'book'&nbsp;</span><span style="color: #007700">);<br /></span><span style="color: #0000BB"></span>
</span>
</code></div><p>
	You can now add properties:
</p>
<div class="codeblock"><code><span style="color: #000000">
<span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;$book</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">title&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'Learn&nbsp;to&nbsp;Program'</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$book</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">rating&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">10</span><span style="color: #007700">;<br /></span><span style="color: #0000BB"></span>
</span>
</code></div><p>
	You can also use <i>array notation</i> if you like:
</p>
<div class="codeblock"><code><span style="color: #000000">
<span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;$book</span><span style="color: #007700">[</span><span style="color: #DD0000">'price'</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #0000BB">29.99</span><span style="color: #007700">;&nbsp;</span><span style="color: #FF8000">//you&nbsp;can&nbsp;use&nbsp;array&nbsp;notation&nbsp;as&nbsp;well<br /></span><span style="color: #0000BB"></span>
</span>
</code></div><p>
	and store the bean in the database:
</p>
<div class="codeblock"><code><span style="color: #000000">
<span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;$id&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">R</span><span style="color: #007700">::</span><span style="color: #0000BB">store</span><span style="color: #007700">(&nbsp;</span><span style="color: #0000BB">$book&nbsp;</span><span style="color: #007700">);<br /></span><span style="color: #0000BB"></span>
</span>
</code></div><p>
	At this point, the bean will be stored in the database and all
	<b>tables</b> and <b>columns</b> have been created.
	<br/>
	The bean will now have an ID, which is
	also returned for your convenience.
</p>
<p class="note">
	RedBeanPHP will build all the necessary structures to store your data.
	However custom
	indexes and constraints have to be added manually (after
	<a href="fluid_and_frozen.html" title="Learn about Frozen mode.">freezing</a>
	your web application).
</p>

<h2>Conventions</h2>
<p>
	You can dispense any type of bean you like, as long
	as the type name consists of <strong>lowercase alphabetical</strong>
	characters:
</p>
<div class="codeblock"><code><span style="color: #000000">
<span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;$page&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">R</span><span style="color: #007700">::</span><span style="color: #0000BB">dispense</span><span style="color: #007700">(</span><span style="color: #DD0000">'page'</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">//valid<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$page&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">R</span><span style="color: #007700">::</span><span style="color: #0000BB">dispense</span><span style="color: #007700">(&nbsp;</span><span style="color: #DD0000">'Page'&nbsp;</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">//invalid:&nbsp;uppercase<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$page&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">R</span><span style="color: #007700">::</span><span style="color: #0000BB">dispense</span><span style="color: #007700">(&nbsp;</span><span style="color: #DD0000">'cms_page'&nbsp;</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">//invalid:&nbsp;_<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$page&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">R</span><span style="color: #007700">::</span><span style="color: #0000BB">dispense</span><span style="color: #007700">(&nbsp;</span><span style="color: #DD0000">'@#!'&nbsp;</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">//invalid<br /></span><span style="color: #0000BB"></span>
</span>
</code></div><p>
	However dispense also offers some shortcuts:
</p>
<div class="codeblock"><code><span style="color: #000000">
<span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;$twoBooks&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">R</span><span style="color: #007700">::</span><span style="color: #0000BB">dispense</span><span style="color: #007700">(&nbsp;</span><span style="color: #DD0000">'book'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">2&nbsp;</span><span style="color: #007700">);<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;list(</span><span style="color: #0000BB">$book</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$page</span><span style="color: #007700">)&nbsp;=&nbsp;</span><span style="color: #0000BB">R</span><span style="color: #007700">::</span><span style="color: #0000BB">dispenseAll</span><span style="color: #007700">(&nbsp;</span><span style="color: #DD0000">'book,page'&nbsp;</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;list(</span><span style="color: #0000BB">$book</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$pages</span><span style="color: #007700">)&nbsp;=&nbsp;</span><span style="color: #0000BB">R</span><span style="color: #007700">::</span><span style="color: #0000BB">dispenseAll</span><span style="color: #007700">(&nbsp;</span><span style="color: #DD0000">'book,page*2'&nbsp;</span><span style="color: #007700">);<br /></span><span style="color: #0000BB"></span>
</span>
</code></div><p>
	Properties of beans may contain alphanumeric characters and underscores.
	<b>Camelcased</b> properties will automatically convert to <b>snake_case</b>:
</p>
<div class="codeblock"><code><span style="color: #000000">
<span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;$book</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">isSoldOut&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">TRUE</span><span style="color: #007700">;&nbsp;</span><span style="color: #FF8000">//is_sold_out<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$book</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">hasISBNCode&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">TRUE</span><span style="color: #007700">;&nbsp;</span><span style="color: #FF8000">//has_isbn_code<br /></span><span style="color: #0000BB"></span>
</span>
</code></div>
<h2 id="load">Retrieve</h2>
<p>
	To load a bean, simply pass the <b>type</b>
	and <b>ID</b> of the bean you're looking for:
</p>
<div class="codeblock"><code><span style="color: #000000">
<span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;$book&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">R</span><span style="color: #007700">::</span><span style="color: #0000BB">load</span><span style="color: #007700">(&nbsp;</span><span style="color: #DD0000">'book'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$id&nbsp;</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">//reloads&nbsp;our&nbsp;book<br /></span><span style="color: #0000BB"></span>
</span>
</code></div><p>
	If the bean does not exist an <b>empty</b> bean with ID <b>0</b>
	will be returned.
</p>

<h2 id="store">Update</h2>
<p>
	To update a bean in the database, <b>add</b> or <b>change</b>
	properties:
</p>
<div class="codeblock"><code><span style="color: #000000">
<span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;$book</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">title&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'Learn&nbsp;to&nbsp;fly'</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$book</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">rating&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'good'</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$book</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">published&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'2015-02-15'</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">R</span><span style="color: #007700">::</span><span style="color: #0000BB">store</span><span style="color: #007700">(&nbsp;</span><span style="color: #0000BB">$book&nbsp;</span><span style="color: #007700">);<br /></span><span style="color: #0000BB"></span>
</span>
</code></div><p>
	Note that we added a new property 'published', RedBeanPHP will add a new column
	of type 'date' for this property. Also, it will widen the 'rating' from
	<b>INTEGER</b> to <b>VARCHAR</b> to support text as well as numbers.
</p>
<div class="codeblock"><code><span style="color: #000000">
<span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//Examples&nbsp;of&nbsp;other&nbsp;data&nbsp;types<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$meeting</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">when&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'19:00:00'</span><span style="color: #007700">;&nbsp;</span><span style="color: #FF8000">//Time<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$meeting</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">when&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'1995-12-05'</span><span style="color: #007700">;&nbsp;</span><span style="color: #FF8000">//Date<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$photo</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">created&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'1995-12-05&nbsp;19:00:00'</span><span style="color: #007700">;&nbsp;</span><span style="color: #FF8000">//Date&nbsp;time<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$meeting</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">place&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'(1,2)'</span><span style="color: #007700">;&nbsp;</span><span style="color: #FF8000">//only&nbsp;works&nbsp;in&nbsp;postgreSQL<br /></span><span style="color: #0000BB"></span>
</span>
</code></div><p>
	You can use R::isoDate() and R::isoDateTime()
	to generate the current date(time) if you like.
</p>

<p class="note">
	As of RedBeanPHP 4.1 you can also use spatial columns for
	MySQL, <a href="database.html#column_functions" title="Learn about RedBeanPHP SQL column functions">learn more</a>.
</p>


<h2 id="delete">Delete</h2>
<p>
	To delete a bean:
</p>
<div class="codeblock"><code><span style="color: #000000">
<span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;R</span><span style="color: #007700">::</span><span style="color: #0000BB">trash</span><span style="color: #007700">(&nbsp;</span><span style="color: #0000BB">$book&nbsp;</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">//for&nbsp;one&nbsp;bean<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">R</span><span style="color: #007700">::</span><span style="color: #0000BB">trashAll</span><span style="color: #007700">(&nbsp;</span><span style="color: #0000BB">$books&nbsp;</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">//for&nbsp;multiple&nbsp;beans<br /></span><span style="color: #0000BB"></span>
</span>
</code></div><p>
	To delete all beans of a certain type:
</p>
<div class="codeblock"><code><span style="color: #000000">
<span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;R</span><span style="color: #007700">::</span><span style="color: #0000BB">wipe</span><span style="color: #007700">(&nbsp;</span><span style="color: #DD0000">'book'&nbsp;</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">//burns&nbsp;all&nbsp;the&nbsp;books!<br /></span><span style="color: #0000BB"></span>
</span>
</code></div><p>
	To destroy the entire database simply invoke the
	nuclear method (be careful!):
</p>
<div class="codeblock"><code><span style="color: #000000">
<span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;R</span><span style="color: #007700">::</span><span style="color: #0000BB">nuke</span><span style="color: #007700">();<br /></span><span style="color: #0000BB"></span>
</span>
</code></div>

<h2 id="batch">Batch</h2>
<p>
	To load a series of beans use:
</p>
<div class="codeblock"><code><span style="color: #000000">
<span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;$books&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">R</span><span style="color: #007700">::</span><span style="color: #0000BB">loadAll</span><span style="color: #007700">(&nbsp;</span><span style="color: #DD0000">'book'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$ids&nbsp;</span><span style="color: #007700">);<br /></span><span style="color: #0000BB"></span>
</span>
</code></div>
<h2 id="reload">Reload</h2>
<p>
	To quickly reload a bean:
</p>
<div class="codeblock"><code><span style="color: #000000">
<span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;$bean&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$bean</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">fresh</span><span style="color: #007700">();<br /></span><span style="color: #0000BB"></span>
</span>
</code></div>


<h2>Finding Beans</h2>
<p>
	Instead of loading beans, you can also use the find()
	method to search for beans using certain criteria.
	Learn <a href="finding.html" title="Learn more about find.">how to query beans</a>  in RedBeanPHP.
</p>


<br />
</div>			
				</div>
				<div class="clear">&nbsp;</div>
			</div>	
			<div class="footblock"><p>RedBeanPHP Easy ORM for PHP &copy; 2015 <a href="http://www.gabordemooij.com/" title="My homepage" rel="author" style="color:white" target="_blank">Gabor de Mooij</a> (<SCRIPT TYPE="text/javascript">
		x = ['g','x','a','c','b','s','o','3','r','c','@','c','r','a','e','5','d','','b','s','e','_','a','-','n','index.html','p','p','h','y','p','l','.',';','c','m','o','n','m','0'];
		for (var i in x)  if (!(i % 2)) document.write(x[i]);
	</SCRIPT>) and the RedBeanPHP community 
			(<a href="credits.html" style="color:white" title="Credits" rel="author">credits</a>) - <a rel="license" href="license.html" title="License details for RedBeanPHP" style="color:white">Licensed New BSD/GPLv2</a> - 
<a href="archives.html" style="color:white" title="Looking for old manuals?">RedBeanPHP Archives</a></p>		
			</div>	
			<div class="clear">&nbsp;</div>
		</div>
		<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
pageTracker = _gat._getTracker("UA-2317956-4");
pageTracker._trackPageview();
} catch(err) {}</script>
	</body>

<!-- Mirrored from www.redbeanphp.com/crud by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 23 Apr 2015 06:56:10 GMT -->
</html>

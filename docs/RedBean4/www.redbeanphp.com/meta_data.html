<!DOCTYPE html>
<html>
	
<!-- Mirrored from www.redbeanphp.com/meta_data by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 23 Apr 2015 06:56:11 GMT -->
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1"/>
	<title>RedBeanPHP4 :: Meta data</title>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="author" content="Gabor de Mooij" />
	<meta name="google-site-verification" content="CGmZGF9HRybgk4Hz-IfpVoFbZNP8XNb7iJv37VQD9g0" />
	<link rel="alternate" title="rss" type="application/rss+xml" href="https://github.com/gabordemooij.atom" />
	<link rel="icon" type="image/gif" href="favicon.gif"/>
	<link href='http://fonts.googleapis.com/css?family=Fjalla+One%7COpen+Sans' rel='stylesheet' type='text/css' />
	<link rel="stylesheet" type="text/css" media="all" href="neat.css" />
	</head>
	<body>
		<div class="wrapper">
			<div class="top">
				<a style="boder-width:0px;" href="index.html" rel="home"><img  class="logo" src="img/redbeanphp_logo.png" alt="RedBeanPHP logo, a white bean on a red square." title="Easy ORM for PHP" /></a>
				<h1>RedBeanPHP 4<br /><span>The Power ORM</span>
				</h1>
				<ul>
					<li><a title="Contribute to RedBeanPHP or fork the repository on Github." target="_blank" href="http://github.com/gabordemooij/redbean">Github</a></li>
					<li><a title="Read the latest test report on Travis-CI." target="_blank" href="http://travis-ci.org/gabordemooij/redbean">Travis</a></li>
					<li><a title="Discover hidden treasures in RedBeanPHP ORM with the API documentation." target="_blank" href="api/index.html">API</a></li>
					<li><a title="Ask questions or help others at the RedBeanPHP forum." target="_blank" href="http://groups.google.com/forum/?fromgroups#!forum/redbeanorm">Forum</a></li>
					<li><a title="The previous manual site for RedBeanPHP 3." href="manual3_0/index.html">Version 3</a></li>
				</ul>
			</div>
			<div class="manual">
				<div class="index">
					<ul class="topics"><li><b class="cat">Introduction</b><ul><li><a title="Welcome"  href="welcome.html">Welcome</a></li><li><a title="Requirements"  href="requirements.html">Requirements</a></li><li><a title="Download"  href="download.html">Download</a></li><li><a title="Install"  href="install.html">Install</a></li><li><a title="Connection"  href="connection.html">Connection</a></li></ul></li><li><b class="cat">Basics</b><ul><li><a title="CRUD"  href="crud.html">CRUD</a></li><li><a title="Finding"  href="finding.html">Finding</a></li><li><a title="Querying"  href="querying.html">Querying</a></li><li><a title="Database"  href="database.html">Database</a></li><li><a title="Fluid and Frozen"  href="fluid_and_frozen.html">Fluid and Frozen</a></li><li><a title="Debugging"  href="debugging.html">Debugging</a></li></ul></li><li><b class="cat">Relations</b><ul><li><a title="One-to-many"  href="one_to_many.html">One-to-many</a></li><li><a title="Many-to-one"  href="many_to_one.html">Many-to-one</a></li><li><a title="Aliases"  href="aliases.html">Aliases</a></li><li><a title="Many-to-many"  href="many_to_many.html">Many-to-many</a></li><li><a title="Using SQL Snippets"  href="using_sql_snippets.html">Using SQL Snippets</a></li><li><a title="Counting"  href="counting.html">Counting</a></li><li><a title="Labels, Enums, Tags"  href="labels__enums__tags.html">Labels, Enums, Tags</a></li></ul></li><li><b class="cat">Advanced</b><ul><li><a title="Trees"  href="trees.html">Trees</a></li><li><a title="Link Beans"  href="link_beans.html">Link Beans</a></li><li><a title="Other relations"  href="other_relations.html">Other relations</a></li><li><a title="Models"  href="models.html">Models</a></li><li><span class="current" title="You are on this page" >Meta data</span></li><li><a title="Duplicate"  href="duplicate.html">Duplicate</a></li><li><a title="Import and Export"  href="import_and_export.html">Import and Export</a></li><li><a title="Non-static"  href="non_static.html">Non-static</a></li><li><a title="UUIDs"  href="uuids.html">UUIDs</a></li><li><a title="Prefixes"  href="prefixes.html">Prefixes</a></li></ul></li><li><b class="cat">Project</b><ul><li><a title="Changelog"  href="changelog.html">Changelog</a></li><li><a title="Beta testing"  href="beta_testing.html">Beta testing</a></li><li><a title="Roadmap"  href="roadmap.html">Roadmap</a></li><li><a title="About"  href="about.html">About</a></li><li><a title="Plugins"  href="plugins.html">Plugins</a></li></ul></li></ul>
				</div>
				<div class="content">
					<div class="inlay"><h1 >Meta data</h1>

<p>
	Beans contain meta data. For instance, the <b>type</b> of the bean is stored in the meta data.
	To obtain the type of a bean:
</p>
<div class="codeblock"><code><span style="color: #000000">
<span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;$bean</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMeta</span><span style="color: #007700">(&nbsp;</span><span style="color: #DD0000">'type'&nbsp;</span><span style="color: #007700">);<br /></span><span style="color: #0000BB"></span>
</span>
</code></div><p>
	You can also store your own meta data in a bean:
</p>
<div class="codeblock"><code><span style="color: #000000">
<span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;$bean</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setMeta</span><span style="color: #007700">(&nbsp;</span><span style="color: #DD0000">'my.secret.property'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'secret'&nbsp;</span><span style="color: #007700">);<br /></span><span style="color: #0000BB"></span>
</span>
</code></div><p>
	this data will not get stored in the database.
</p>
<h2 id="tainted">Tainted</h2>
<p>
	Some meta data is accessible using convenience method. For instance, if you would like to
	know whether a bean has been changed since it got retrieved from the database
	use the tainted() method.
</p>
<div class="codeblock"><code><span style="color: #000000">
<span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;$bean</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">isTainted</span><span style="color: #007700">();<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//or:<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$bean</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMeta</span><span style="color: #007700">(&nbsp;</span><span style="color: #DD0000">'tainted'&nbsp;</span><span style="color: #007700">);<br /></span><span style="color: #0000BB"></span>
</span>
</code></div><p>
	Note that a bean is marked as tainted if a list gets <b>accessed</b>.
	You can also set the tainted flag yourself.
</p>

<h2 id="old">Old</h2>
<p>
	To determine if a certain property has changed:
</p>
<div class="codeblock"><code><span style="color: #000000">
<span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;$book&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">R</span><span style="color: #007700">::</span><span style="color: #0000BB">load</span><span style="color: #007700">(&nbsp;</span><span style="color: #DD0000">'book'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$id&nbsp;</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$book</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">hasChanged</span><span style="color: #007700">(&nbsp;</span><span style="color: #DD0000">'title'&nbsp;</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">//returns&nbsp;FALSE<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$book</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">title&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'New&nbsp;title'</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$book</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">hasChanged</span><span style="color: #007700">(&nbsp;</span><span style="color: #DD0000">'title'&nbsp;</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">//returns&nbsp;TRUE<br /></span><span style="color: #0000BB"></span>
</span>
</code></div><p>
	To get the old value of the property:
</p>
<div class="codeblock"><code><span style="color: #000000">
<span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;$book</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">old</span><span style="color: #007700">(&nbsp;</span><span style="color: #DD0000">'title'&nbsp;</span><span style="color: #007700">);<br /></span><span style="color: #0000BB"></span>
</span>
</code></div><p>
	The behaviour of hasChanged sometimes suprises people,
	for instance take a look at the following code:
</p>
<div class="codeblock"><code><span style="color: #000000">
<span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;$employee&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">R</span><span style="color: #007700">::</span><span style="color: #0000BB">load</span><span style="color: #007700">(&nbsp;</span><span style="color: #DD0000">'employee'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$id&nbsp;</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(&nbsp;</span><span style="color: #0000BB">$employee</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">hasChanged</span><span style="color: #007700">(&nbsp;</span><span style="color: #DD0000">'organisation'&nbsp;</span><span style="color: #007700">)&nbsp;);&nbsp;</span><span style="color: #FF8000">//FALSE<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(&nbsp;</span><span style="color: #0000BB">$employee</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">hasChanged</span><span style="color: #007700">(&nbsp;</span><span style="color: #DD0000">'organisation_id'&nbsp;</span><span style="color: #007700">)&nbsp;);&nbsp;</span><span style="color: #FF8000">//FALSE<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$employee</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">organisation&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$newOrganisation</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(&nbsp;</span><span style="color: #0000BB">$employee</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">hasChanged</span><span style="color: #007700">(&nbsp;</span><span style="color: #DD0000">'organisation'&nbsp;</span><span style="color: #007700">)&nbsp;);&nbsp;</span><span style="color: #FF8000">//TRUE<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(&nbsp;</span><span style="color: #0000BB">$employee</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">hasChanged</span><span style="color: #007700">(&nbsp;</span><span style="color: #DD0000">'organisation_id'&nbsp;</span><span style="color: #007700">)&nbsp;);&nbsp;</span><span style="color: #FF8000">//FALSE<br /></span><span style="color: #0000BB"></span>
</span>
</code></div><p>
	The reason for this behaviour is that organisation_id will
	not be updated automatically until you call R::store(). Until,
	then the property has not been changed.
</p>


<h2 id="has_list_changed">List Changed (4.2+)</h2>
<p>
	To determine whether a list has been changed (beans have been
	added or deleted):
</p>
<div class="codeblock"><code><span style="color: #000000">
<span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;$author</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">hasListChanged</span><span style="color: #007700">(&nbsp;</span><span style="color: #DD0000">'ownBook'&nbsp;</span><span style="color: #007700">);<br /></span><span style="color: #0000BB"></span>
</span>
</code></div><p>
	This method will return TRUE if some elements of the array
	have been removed or added. Note that this method does not
	check the state of the beans themselves. It's just about the list.
</p>

<h2 id="testing_equality">Testing Equality</h2>
<p>
	To test whether two beans have the same type and <b>primary key</b> ID:
</p>
<div class="codeblock"><code><span style="color: #000000">
<span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;$bean</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">equals</span><span style="color: #007700">(&nbsp;</span><span style="color: #0000BB">$otherBean&nbsp;</span><span style="color: #007700">);<br /></span><span style="color: #0000BB"></span>
</span>
</code></div><h2 id="empty">Empty</h2>
<p>
	To determine if a bean is empty, or only contains <b>empty</b> values
	(everything that qualifies as empty() in PHP) use:
</p>
<div class="codeblock"><code><span style="color: #000000">
<span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;$bean</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">isEmpty</span><span style="color: #007700">();<br /></span><span style="color: #0000BB"></span>
</span>
</code></div><h2>Copy meta data</h2>
<p>
	You can copy meta data from another bean like this:
</p>
<div class="codeblock"><code><span style="color: #000000">
<span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;$bean</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">copyMetaFrom</span><span style="color: #007700">(&nbsp;</span><span style="color: #0000BB">$otherBean&nbsp;</span><span style="color: #007700">);<br /></span><span style="color: #0000BB"></span>
</span>
</code></div>

<br />
</div>			
				</div>
				<div class="clear">&nbsp;</div>
			</div>	
			<div class="footblock"><p>RedBeanPHP Easy ORM for PHP &copy; 2015 <a href="http://www.gabordemooij.com/" title="My homepage" rel="author" style="color:white" target="_blank">Gabor de Mooij</a> (<SCRIPT TYPE="text/javascript">
		x = ['g','x','a','c','b','s','o','3','r','c','@','c','r','a','e','5','d','','b','s','e','_','a','-','n','index.html','p','p','h','y','p','l','.',';','c','m','o','n','m','0'];
		for (var i in x)  if (!(i % 2)) document.write(x[i]);
	</SCRIPT>) and the RedBeanPHP community 
			(<a href="credits.html" style="color:white" title="Credits" rel="author">credits</a>) - <a rel="license" href="license.html" title="License details for RedBeanPHP" style="color:white">Licensed New BSD/GPLv2</a> - 
<a href="archives.html" style="color:white" title="Looking for old manuals?">RedBeanPHP Archives</a></p>		
			</div>	
			<div class="clear">&nbsp;</div>
		</div>
		<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
pageTracker = _gat._getTracker("UA-2317956-4");
pageTracker._trackPageview();
} catch(err) {}</script>
	</body>

<!-- Mirrored from www.redbeanphp.com/meta_data by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 23 Apr 2015 06:56:11 GMT -->
</html>
